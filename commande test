# Commandes de Test et de Gestion

Ce fichier regroupe les commandes utiles pour g√©rer et tester l'infrastructure.

## üöÄ D√©marrage et Arr√™t

D√©marrer tous les services en arri√®re-plan :
```bash
docker compose up -d
```

Arr√™ter tous les services :
```bash
docker compose down
```

Voir les logs d'un service sp√©cifique (ex: vpn) :
```bash
docker compose logs -f vpn
```

## üîç V√©rification des Services

### DNS (BIND9)
Tester la r√©solution de nom depuis votre machine h√¥te (Mac) :
```bash
dig @localhost -p 20053 vpn.lab.local
```

Tester depuis le conteneur :
```bash
docker exec dns_server dig @localhost vpn.lab.local
```

### NTP (Chrony)
V√©rifier l'√©tat de la synchronisation :
```bash
docker exec ntp_server chronyc tracking
```

### RADIUS (FreeRADIUS)
Tester l'authentification (User: `steve`, Pass: `testing` - Fichier Users) :
```bash
docker exec radius_server radtest steve testing localhost 0 testing123
```

Tester l'authentification SQL (User: `sqluser`, Pass: `sqlpassword` - PostgreSQL) :
```bash
docker exec radius_server radtest sqluser sqlpassword localhost 0 testing123
```
*Si vous obtenez `Access-Accept`, c'est que √ßa fonctionne.*

### VPN (OpenVPN)
V√©rifier que le serveur a bien d√©marr√© (rechercher "Initialization Sequence Completed") :
```bash
docker logs vpn_server | grep "Initialization Sequence Completed"
```

## üõ†Ô∏è Maintenance

Acc√©der au shell d'un conteneur (ex: DNS) :
```bash
docker exec -it dns_server bash
```

Red√©marrer un service sp√©cifique (ex: RADIUS) :
```bash
docker compose restart radius
```